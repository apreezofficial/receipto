# Receipto API

## Overview
A specialized PHP backend engine designed for generating dynamic, template-driven transaction receipts. The system utilizes a JSON-based flat-file database for high-performance data persistence without the overhead of traditional SQL servers, featuring device-fingerprinting security logic.

## Features
- PHP 8.x: Core server-side logic and request orchestration.
- JSON Database: Flat-file persistence for user accounts and receipt records.
- Session-Based Auth: Secure state management for user environments.
- Device Validation: Security layer ensuring account access is restricted to authorized hardware/IP combinations.

## Getting Started
### Installation
1. Clone the repository to your local server environment (e.g., XAMPP, WAMP, or Nginx).
2. Ensure the `src/` directory and `db.json` file have write permissions.
3. Configure your web server to serve `index.php` as the entry point.

### Environment Variables
The system uses server-side global variables. Ensure your `php.ini` allows the following:
- `REMOTE_ADDR`: Required for IP-based security validation.
- `HTTP_USER_AGENT`: Required for device fingerprinting.

## API Documentation
### Base URL
`http://localhost/receipto`

### Endpoints

#### POST /index.php (Registration)
**Request**:
```json
{
  "email": "user@example.com",
  "password": "StrongPassword123",
  "auth_action": "signup",
  "device_id": "dev_5f3e2a1b9c8d"
}
```

**Response**:
```json
{
  "id": "u_6455615d00331",
  "email": "user@example.com",
  "device": "dev_5f3e2a1b9c8d",
  "ip": "127.0.0.1",
  "created_at": "2025-12-31T18:46:05+01:00"
}
```

**Errors**:
- 200 (With Error String): Email already registered.
- 200 (With Error String): This device/IP already has a different email registered.

#### POST /index.php (Login)
**Request**:
```json
{
  "email": "user@example.com",
  "password": "StrongPassword123",
  "auth_action": "login",
  "device_id": "dev_5f3e2a1b9c8d"
}
```

**Response**:
`302 Redirect to index.php (Session Initialized)`

**Errors**:
- 200 (With Error String): Invalid credentials.
- 200 (With Error String): This email is registered from a different device/IP.

#### POST /index.php (Generate Receipt)
**Request**:
```json
{
  "service": "binance_deposit",
  "amount": "0.55",
  "currency": "BTC",
  "network": "Bitcoin",
  "wallet": "Spot Wallet",
  "address": "1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa",
  "txid": "b6f4c09d358b5220...8d3f",
  "date": "2025-12-31T09:46",
  "confirmations": "1/1"
}
```

**Response**:
`302 Redirect to index.php?receipt=r_6955618773f7f`

**Errors**:
- 200 (With Error String): You must be logged in to generate receipts.
- 200 (With Error String): Please select a valid service.

#### GET /index.php?receipt={id}
**Request**:
`Query Parameter: receipt (The unique ID of the transaction)`

**Response**:
```json
{
  "id": "r_6955618773f7f",
  "service": "binance_deposit",
  "service_name": "Binance Deposit",
  "email": "user@example.com",
  "details": {
    "amount": "0.55",
    "currency": "BTC",
    "network": "Bitcoin",
    "wallet": "Spot Wallet",
    "txid": "b6f4c09d358b5220...8d3f"
  }
}
```

**Errors**:
- 200 (Empty View): Receipt ID not found in db.json.

## Usage
To use Receipto, follow these steps:
1. **Authentication**: Create an account or log in. The system will lock your account to your current device fingerprint for security.
2. **Service Selection**: Choose from various crypto receipt templates including Binance Deposit, Withdrawal, and Generic Blockchain proofs.
3. **Data Entry**: Fill in the dynamic form fields (TxID, Amount, Address, etc.) specific to the chosen service.
4. **Export**: Once generated, view the professional-grade receipt and use the "Download PNG" feature to export a high-quality image of the transaction details.

## Technologies Used
| Technology | Purpose | Link |
| :--- | :--- | :--- |
| PHP | Backend Logic & Routing | [php.net](https://www.php.net/) |
| Tailwind CSS | Professional UI Styling | [tailwindcss.com](https://tailwindcss.com/) |
| JSON | Flat-file Database | [json.org](https://www.json.org/) |
| html2canvas | Client-side Image Export | [html2canvas.hertzen.com](https://html2canvas.hertzen.com/) |

## Contributing
- ü§ù Fork the repository and create your branch.
- üõ†Ô∏è Maintain the structural integrity of `src/db.php`.
- üß™ Ensure all new receipt templates follow the `get_services_config` schema.
- üìù Document any changes to the dynamic field rendering logic.

## Author Info
- **Developer**: [Your Name/Username]
- **LinkedIn**: [Your LinkedIn Profile]
- **Twitter**: [Your Twitter Profile]

---
![PHP](https://img.shields.io/badge/PHP-777BB4?style=for-the-badge&logo=php&logoColor=white)
![Tailwind](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white)
![Status](https://img.shields.io/badge/Status-Production--Ready-brightgreen?style=for-the-badge)

[![Readme was generated by Dokugen](https://img.shields.io/badge/Readme%20was%20generated%20by-Dokugen-brightgreen)](https://www.npmjs.com/package/dokugen)